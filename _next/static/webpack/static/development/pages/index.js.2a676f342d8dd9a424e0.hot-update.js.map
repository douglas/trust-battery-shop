{"version":3,"file":"static/webpack/static/development/pages/index.js.2a676f342d8dd9a424e0.hot-update.js","sources":["webpack:///./components/SnowflakeApp.js"],"sourcesContent":["// @flow\n\nimport TrackSelector from '../components/TrackSelector'\nimport NightingaleChart from '../components/NightingaleChart'\nimport KeyboardListener from '../components/KeyboardListener'\nimport Track from '../components/Track'\nimport Wordmark from '../components/Wordmark'\nimport LevelThermometer from '../components/LevelThermometer'\nimport { eligibleTitles, trackIds, milestones, milestoneToPoints } from '../constants'\nimport PointSummaries from '../components/PointSummaries'\nimport type { Milestone, MilestoneMap, TrackId } from '../constants'\nimport React from 'react'\nimport TitleSelector from '../components/TitleSelector'\n\ntype SnowflakeAppState = {\n  milestoneByTrack: MilestoneMap,\n  name: string,\n  title: string,\n  focusedTrackId: TrackId,\n}\n\nconst hashToState = (hash: String): ?SnowflakeAppState => {\n  if (!hash) return null\n  const result = defaultState()\n  const hashValues = hash.split('#')[1].split(',')\n  if (!hashValues) return null\n  trackIds.forEach((trackId, i) => {\n    result.milestoneByTrack[trackId] = coerceMilestone(Number(hashValues[i]))\n  })\n  if (hashValues[16]) result.name = decodeURI(hashValues[16])\n  if (hashValues[17]) result.title = decodeURI(hashValues[17])\n  return result\n}\n\nconst coerceMilestone = (value: number): Milestone => {\n  // HACK I know this is goofy but i'm dealing with flow typing\n  switch(value) {\n    case 0: return 0\n    case 1: return 1\n    case 2: return 2\n    case 3: return 3\n    case 4: return 4\n    case 5: return 5\n    default: return 0\n  }\n}\n\nconst emptyState = (): SnowflakeAppState => {\n  return {\n    name: '',\n    title: '',\n    milestoneByTrack: {\n      'MOBILE': 0,\n      'WEB_CLIENT': 0,\n      'FOUNDATIONS': 0,\n      'SERVERS': 0,\n      'PROJECT_MANAGEMENT': 0,\n      'COMMUNICATION': 0,\n      'CRAFT': 0,\n      'INITIATIVE': 0,\n      'CAREER_DEVELOPMENT': 0,\n      'ORG_DESIGN': 0,\n      'WELLBEING': 0,\n      'ACCOMPLISHMENT': 0,\n      'MENTORSHIP': 0,\n      'EVANGELISM': 0,\n      'RECRUITING': 0,\n      'COMMUNITY': 0\n    },\n    focusedTrackId: 'MOBILE'\n  }\n}\n\nconst defaultState = (): SnowflakeAppState => {\n  return {\n    name: 'Cersei Lannister',\n    title: 'Staff Engineer',\n    milestoneByTrack: {\n      'MOBILE': 1,\n      'WEB_CLIENT': 2,\n      'FOUNDATIONS': 3,\n      'SERVERS': 2,\n      'PROJECT_MANAGEMENT': 4,\n      'COMMUNICATION': 1,\n      'CRAFT': 1,\n      'INITIATIVE': 4,\n      'CAREER_DEVELOPMENT': 3,\n      'ORG_DESIGN': 2,\n      'WELLBEING': 0,\n      'ACCOMPLISHMENT': 4,\n      'MENTORSHIP': 2,\n      'EVANGELISM': 2,\n      'RECRUITING': 3,\n      'COMMUNITY': 0\n    },\n    focusedTrackId: 'MOBILE'\n  }\n}\n\nconst stateToHash = (state: SnowflakeAppState) => {\n  if (!state || !state.milestoneByTrack) return null\n  const values = trackIds.map(trackId => state.milestoneByTrack[trackId]).concat(encodeURI(state.name), encodeURI(state.title))\n  return values.join(',')\n}\n\ntype Props = {}\n\nclass SnowflakeApp extends React.Component<Props, SnowflakeAppState> {\n  constructor(props: Props) {\n    super(props)\n    this.state = emptyState()\n  }\n\n  componentDidUpdate() {\n    const hash = stateToHash(this.state)\n    if (hash) window.location.replace(`#${hash}`)\n  }\n\n  componentDidMount() {\n    const state = hashToState(window.location.hash)\n    if (state) {\n      this.setState(state)\n    } else {\n      this.setState(defaultState())\n    }\n  }\n\n  render() {\n    return (\n      <main>\n        <style jsx global>{`\n          body {\n            font-family: Helvetica;\n          }\n          main {\n            width: 960px;\n            margin: 0 auto;\n          }\n          .name-input {\n            border: none;\n            display: block;\n            border-bottom: 2px solid #fff;\n            font-size: 30px;\n            line-height: 40px;\n            font-weight: bold;\n            width: 380px;\n            margin-bottom: 10px;\n          }\n          .name-input:hover, .name-input:focus {\n            border-bottom: 2px solid #ccc;\n            outline: 0;\n          }\n          a {\n            color: #888;\n            text-decoration: none;\n          }\n        `}</style>\n        <div style={{margin: '19px auto 0', width: 142}}>\n          <a href=\"https://www.shopify.com\" target=\"_blank\">\n            <Wordmark />\n          </a>\n        </div>\n        <div style={{display: 'flex'}}>\n          <div style={{flex: 1}}>\n            <form>\n              <input\n                  type=\"text\"\n                  className=\"name-input\"\n                  value={this.state.name}\n                  onChange={e => this.setState({name: e.target.value})}\n                  placeholder=\"Name\"\n                  />\n              <TitleSelector\n                  milestoneByTrack={this.state.milestoneByTrack}\n                  currentTitle={this.state.title}\n                  setTitleFn={(title) => this.setTitle(title)} />\n            </form>\n            <PointSummaries milestoneByTrack={this.state.milestoneByTrack} />\n            <LevelThermometer milestoneByTrack={this.state.milestoneByTrack} />\n          </div>\n          <div style={{flex: 0}}>\n            <NightingaleChart\n                milestoneByTrack={this.state.milestoneByTrack}\n                focusedTrackId={this.state.focusedTrackId}\n                handleTrackMilestoneChangeFn={(track, milestone) => this.handleTrackMilestoneChange(track, milestone)} />\n          </div>\n        </div>\n        <TrackSelector\n            milestoneByTrack={this.state.milestoneByTrack}\n            focusedTrackId={this.state.focusedTrackId}\n            setFocusedTrackIdFn={this.setFocusedTrackId.bind(this)} />\n        <KeyboardListener\n            selectNextTrackFn={this.shiftFocusedTrack.bind(this, 1)}\n            selectPrevTrackFn={this.shiftFocusedTrack.bind(this, -1)}\n            increaseFocusedMilestoneFn={this.shiftFocusedTrackMilestoneByDelta.bind(this, 1)}\n            decreaseFocusedMilestoneFn={this.shiftFocusedTrackMilestoneByDelta.bind(this, -1)} />\n        <Track\n            milestoneByTrack={this.state.milestoneByTrack}\n            trackId={this.state.focusedTrackId}\n            handleTrackMilestoneChangeFn={(track, milestone) => this.handleTrackMilestoneChange(track, milestone)} />\n        <div style={{display: 'flex', paddingBottom: '20px'}}>\n          <div style={{flex: 1}}>\n            Made with ❤️ by <a href=\"https://medium.engineering\" target=\"_blank\">Medium Eng</a>.\n            Learn about the <a href=\"https://medium.com/s/engineering-growth-framework\" target=\"_blank\">this version of our growth framework</a>\n            {' '}and <a href=\"https://medium.engineering/engineering-growth-at-medium-4935b3234d25\" target=\"_blank\">what we do currently</a>.\n            Get the <a href=\"https://github.com/Medium/snowflake\" target=\"_blank\">source code</a>.\n            Read the <a href=\"https://medium.com/p/85e078bc15b7\" target=\"_blank\">terms of service</a>.\n          </div>\n        </div>\n      </main>\n    )\n  }\n\n  handleTrackMilestoneChange(trackId: TrackId, milestone: Milestone) {\n    const milestoneByTrack = this.state.milestoneByTrack\n    milestoneByTrack[trackId] = milestone\n\n    const titles = eligibleTitles(milestoneByTrack)\n    const title = titles.indexOf(this.state.title) === -1 ? titles[0] : this.state.title\n\n    this.setState({ milestoneByTrack, focusedTrackId: trackId, title })\n  }\n\n  shiftFocusedTrack(delta: number) {\n    let index = trackIds.indexOf(this.state.focusedTrackId)\n    index = (index + delta + trackIds.length) % trackIds.length\n    const focusedTrackId = trackIds[index]\n    this.setState({ focusedTrackId })\n  }\n\n  setFocusedTrackId(trackId: TrackId) {\n    let index = trackIds.indexOf(trackId)\n    const focusedTrackId = trackIds[index]\n    this.setState({ focusedTrackId })\n  }\n\n  shiftFocusedTrackMilestoneByDelta(delta: number) {\n    let prevMilestone = this.state.milestoneByTrack[this.state.focusedTrackId]\n    let milestone = prevMilestone + delta\n    if (milestone < 0) milestone = 0\n    if (milestone > 5) milestone = 5\n    this.handleTrackMilestoneChange(this.state.focusedTrackId, ((milestone: any): Milestone))\n  }\n\n  setTitle(title: string) {\n    let titles = eligibleTitles(this.state.milestoneByTrack)\n    title = titles.indexOf(title) == -1 ? titles[0] : title\n    this.setState({ title })\n  }\n}\n\nexport default SnowflakeApp\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAkBA;AArBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAkBA;AArBA;AAuBA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAGA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAGA;AACA;;;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;AA7IA;AACA;AA+IA;;;;A","sourceRoot":""}